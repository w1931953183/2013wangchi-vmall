!function(t){"function"==typeof define&&define.amd?define(["jquery","ChineseDistricts"],t):"object"==typeof exports?t(require("jquery"),require("ChineseDistricts")):t(jQuery,ChineseDistricts)}(function(d,u){"use strict";if(void 0===u)throw new Error('The file "distpicker.data.js" must be included first!');var o="distpicker",i="change."+o,a="province",f="city",p="district";function r(t,i){this.$element=d(t),this.options=d.extend({},r.DEFAULTS,d.isPlainObject(i)&&i),this.placeholders=d.extend({},r.DEFAULTS),this.active=!1,this.init()}r.prototype={constructor:r,init:function(){var e=this.options,s=this.$element.find("select"),n=s.length,c={};s.each(function(){d.extend(c,d(this).data())}),d.each([a,f,p],d.proxy(function(t,i){c[i]?(e[i]=c[i],this["$"+i]=s.filter("[data-"+i+"]")):this["$"+i]=t<n?s.eq(t):null},this)),this.bind(),this.reset(),this.active=!0},bind:function(){this.$province&&this.$province.on(i,this._changeProvince=d.proxy(function(){this.output(f),this.output(p)},this)),this.$city&&this.$city.on(i,this._changeCity=d.proxy(function(){this.output(p)},this))},unbind:function(){this.$province&&this.$province.off(i,this._changeProvince),this.$city&&this.$city.off(i,this._changeCity)},output:function(t){var i,e,s,n,c=this.options,o=this.placeholders,r=this["$"+t],h=[];r&&r.length&&(n=c[t],e=t===a?86:t===f?this.$province&&this.$province.find(":selected").data("code"):t===p?this.$city&&this.$city.find(":selected").data("code"):e,i=d.isNumeric(e)?u[e]:null,d.isPlainObject(i)&&d.each(i,function(t,i){var e=i===n;e&&(s=!0),h.push({code:t,address:i,selected:e})}),s||(h.length&&(c.autoSelect||c.autoselect)&&(h[0].selected=!0),!this.active&&n&&(o[t]=n)),c.placeholder&&h.unshift({code:"",address:o[t],selected:!1}),r.html(this.getList(h)))},getList:function(t){var e=[];return d.each(t,function(t,i){e.push('<option value="'+(i.address&&i.code?i.address:"")+'" data-code="'+(i.code||"")+'"'+(i.selected?" selected":"")+">"+(i.address||"")+"</option>")}),e.join("")},reset:function(t){t?this.$province&&this.$province.find(":first").prop("selected",!0).trigger(i):(this.output(a),this.output(f),this.output(p))},destroy:function(){this.unbind(),this.$element.removeData(o)}},r.DEFAULTS={autoSelect:!0,placeholder:!0,province:"—— 省 ——",city:"—— 市 ——",district:"—— 区 ——"},r.setDefaults=function(t){d.extend(r.DEFAULTS,t)},r.other=d.fn.distpicker,d.fn.distpicker=function(n){var c=[].slice.call(arguments,1);return this.each(function(){var t,i,e=d(this),s=e.data(o);if(!s){if(/destroy/.test(n))return;t=d.extend({},e.data(),d.isPlainObject(n)&&n),e.data(o,s=new r(this,t))}"string"==typeof n&&d.isFunction(i=s[n])&&i.apply(s,c)})},d.fn.distpicker.Constructor=r,d.fn.distpicker.setDefaults=r.setDefaults,d.fn.distpicker.noConflict=function(){return d.fn.distpicker=r.other,this},d(function(){d('[data-toggle="distpicker"]').distpicker()})});