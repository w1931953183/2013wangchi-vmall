var cook,text1,sea=window.location.search,id=sea.split("=")[1].toString().split("&")[0],usernum=sea.split("=")[2];"undefined"!=usernum&&(cook=getCookie(usernum),(text1=document.querySelector(".nav-right").firstElementChild.children[0]).innerHTML=`<li><a href="javascript:;" style="color:#fff">欢迎&nbsp;${cook}</a></li>`);const navLeft=document.querySelector(".nav-left"),navLeftIndex=navLeft.querySelector("li");navLeftIndex.addEventListener("click",function(){window.location.href="./index.html?user="+usernum});var routenav=document.querySelector(".routenav"),goodsinfo=document.querySelector(".goodsinfo");sea?async function(){var n=await promiseAjax({url:"../php/details.php",data:"id="+id,datatype:"json"}),e=(document.querySelector("title").innerHTML=n.title,`
			<ol class="breadcrumb clearfix">
			  <li><a href="./index.html">首页</a><i class="iconfont icon-you"></i></li>
			  <li><a href="./list.html?val=${n.keys}">${n.keymain}</a><i class="iconfont icon-you"></i></li>
			  <li><a href="javascript:;">${n.title}</a></i></li>
			</ol>
		`);routenav.innerHTML=e,goodsinfo.innerHTML=detailsRenderer(n);const i=document.querySelector(".goodsinfo-left"),t=goodsinfo.querySelectorAll("li"),r=i.querySelector(".goodsinfo-left-minimg-box");var l=r.offsetWidth;const o=i.querySelector(".goodsinfo-left-maximg"),s=i.querySelector(".goodsinfo-left-minimg-left"),d=i.querySelector(".goodsinfo-left-minimg-right");s.addEventListener("click",function(){r.scrollLeft=-l}),d.addEventListener("click",function(){r.scrollLeft=l});for(let n=0;n<t.length;n++)t[n].addEventListener("click",function(){for(let e=0;e<t.length;e++)t[e].className="";t[n].className="goodsli";var e=t[n].firstElementChild.getAttribute("src");o.firstElementChild.setAttribute("src",e)});var c=o.offsetWidth,a=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div"),e=document.createElement("img");setCss(a,{width:c/2+"px",height:c/2+"px",backgroundColor:"rgba(255,255,255,0.2)",border:"1px solid #ccc",position:"absolute",top:"0px",left:"0px",display:"none"}),setCss(u,{width:c+"px",height:c+"px",border:"1px solid #ccc",position:"absolute",top:"0px",left:"500px",zIndex:"500",overflow:"hidden",display:"none"}),setCss(h,{width:c+"px",height:c+"px",backgroundColor:"#fff"}),setCss(e,{width:2*c+"px",height:2*c+"px",position:"absolute",top:"0px",left:"0px"}),u.appendChild(h),h.appendChild(e),o.appendChild(a),o.appendChild(u),h=o.firstElementChild.getAttribute("src"),e.setAttribute("src",h),o.addEventListener("mouseover",function(){a.style.display="block",u.style.display="block"}),o.addEventListener("mouseout",function(){a.style.display="none",u.style.display="none"}),o.addEventListener("mousemove",function(e){e=e||window.event;fangdajing(e,a,o,u)});const m=goodsinfo.querySelector(".goodsinfo-right"),f=m.querySelector(".goodsinfo-right-class"),p=f.children[0],g=f.children[1];var v,L=p.children[1].innerText;0<g.children.length&&(v=g.children[1].innerText),0<g.children.length?f.children[5].children[1].innerHTML=`${L}/${v}/官方标配`:f.children[5].children[1].innerHTML=`${L}/官方标配`;let y={intnum:1,options:f.children[5].children[1].innerHTML,...n};for(let e=1;e<p.children.length;e++)p.children[e].addEventListener("click",function(){for(let e=1;e<p.children.length;e++)p.children[e].className="";p.children[e].className="goodsinfo-right-class-borshow",L=p.children[e].innerText,0<g.children.length?f.children[5].children[1].innerHTML=`${L}/${v}/官方标配`:f.children[5].children[1].innerHTML=`${L}/官方标配`,y={intnum:1,options:f.children[5].children[1].innerHTML,...n}});for(let e=1;e<g.children.length;e++)g.children[e].addEventListener("click",function(){for(let e=1;e<g.children.length;e++)g.children[e].className="";g.children[e].className="goodsinfo-right-class-borshow",v=g.children[e].innerText,f.children[5].children[1].innerHTML=`${L}/${v}/官方标配`,y={intnum:1,options:f.children[5].children[1].innerHTML,...n}});const x=document.querySelector(".add-cart");f.children[6].addEventListener("click",function(e){var i=(e=e||window.event).target||e.srcElement;if("jia"==i.name){let e=parseInt(i.previousElementSibling.innerHTML);e<parseInt(n.num)&&(e++,y.intnum++),i.previousElementSibling.innerHTML=e}if("jian"==i.name){let e=parseInt(i.previousElementSibling.previousElementSibling.innerHTML);1<e&&(e--,y.intnum--),i.previousElementSibling.previousElementSibling.innerHTML=e}if("到货提示"==i.innerHTML&&alert("已开启到货提醒，到货第一时间提醒你哦~"),"加入购物车"==i.innerHTML)if("undefined"==usernum)window.location.href="./login.html?url1="+window.location.href;else{let e=[];if(usernumList=localStorage.getItem(usernum),usernumList){let n=!0;usernumList=JSON.parse(usernumList),usernumList.forEach(e=>{e.id==y.id&&e.options==y.options&&(e.intnum+=y.intnum,n=!1,i.parentNode.previousElementSibling.children[0].innerHTML=e.intnum)}),n&&usernumList.push(y),localStorage.setItem(usernum,JSON.stringify(usernumList))}else e.push(y),localStorage.setItem(usernum,JSON.stringify(e));x.firstElementChild.children[1].firstElementChild.innerHTML=y.title,x.style.display="block"}}),x.addEventListener("click",function(e){e=(e=e||window.event).target||e.srcElement;"X"==e.innerHTML&&(e.parentNode.parentNode.style.display="none"),"zaigg"==e.name&&(e.parentNode.parentNode.parentNode.style.display="none"),"去结算"==e.innerHTML&&(console.log(111),window.location.href="./shopcart.html?user="+usernum)})}():(alert("非法进入请退出!!!"),location.href="./index.html");